---
title: "分布式工作流程"
description: "理解分布式版本控制的核心概念以及为何它是现代工作流的基石。"
sidebar:
  order: 1
---

在深入探讨具体的 Git 工作流（如 Gitflow 或主干开发）之前，我们需要先理解 Git 作为**分布式版本控制系统 (DVCS)** 的本质。这一特性决定了 Git 工作流的灵活性和多样性。

## 集中式 vs 分布式

为了理解 Git 的工作方式，最直观的方法是将其与传统的**集中式版本控制系统 (CVCS)**（如 SVN, CVS）进行对比。

### 集中式工作流 (Centralized)

在集中式系统中，所有的版本历史都存储在一个中央服务器上。开发者只检出（Checkout）当前文件的最新快照。

*   **单点依赖**：如果服务器宕机，没人能提交代码或获取历史。
*   **网络限制**：大多数操作（查看历史、提交、对比）都需要联网。
*   **线性历史**：通常强推单一主线，分支和合并操作相对笨重且昂贵。

### 分布式工作流 (Distributed)

Git 是分布式的。这意味着客户端不仅仅是检出文件的最新快照，而是**把整个代码仓库（包括完整的历史记录）完整地镜像下来**。

*   **完整备份**：每个开发者的本地仓库都是远程仓库的完整备份。
*   **离线工作**：几乎所有操作（提交、查看历史、分支切换、Diff）都在本地进行，无需联网，速度极快。
*   **强大的分支**：Git 的分支非常轻量，鼓励频繁创建和合并分支，这改变了开发者的协作方式。

:::note[核心概念]
在分布式工作流中，**没有技术上的“中央服务器”**。所谓的“远程仓库”（如 GitHub 上的 origin）只是大家约定的一个交换代码的节点，本质上它和你的本地仓库是平等的。
:::

## 分布式协作的优势

这种架构为团队协作带来了巨大的灵活性，使得各种复杂的工作流成为可能：

1.  **灵活的分支策略**：
    由于分支操作在本地极其廉价，开发者可以为每个新功能、每个 Bug 修复甚至每个实验性想法创建一个独立的分支，而不会干扰主线。

2.  **多样的集成方式**：
    *   **共享仓库模式**：团队成员都有推送到中央仓库的权限（类似 SVN，但利用了 Git 的本地分支）。
    *   **Forking 模式**：开发者 Fork 项目到自己的远程仓库，通过 Pull Request 贡献代码（开源项目标配）。
    *   **独裁者/副官模式**：大型项目（如 Linux 内核）使用多层级的集成方式，由“副官”集成子模块，“独裁者”合并到主分支。

3.  **更好的代码审查**：
    通过 Pull Request (PR) 或 Merge Request (MR) 机制，代码在合并到共享分支之前，可以经过严格的审查和自动化测试。

## 如何选择工作流？

既然 Git 如此灵活，团队应该采用哪种工作模式呢？这取决于以下因素：

*   **团队规模**：由几个人组成的初创团队 vs 数百人的大型企业。
*   **发布周期**：每天发布多次 (CI/CD) vs 每月/每季度发布一次。
*   **项目类型**：SaaS 产品 vs 本地安装软件 vs 手机 App vs 开源库。
*   **人员能力**：团队成员对 Git 的熟悉程度。

在接下来的章节中，我们将深入探讨三种最主流的工作流模式：

1.  **Gitflow 工作流**：结构严谨，适合版本发布的传统软件。
2.  **Forking 工作流**：权限隔离，适合开源项目和大型团队。
3.  **主干开发 (Trunk-based)**：速度优先，适合现代 CI/CD 和高频发布的 SaaS 团队。

:::tip
没有绝对“最好”的工作流，只有**最适合**你团队当前阶段的工作流。理解每种模式的优缺点，才能做出明智的选择。
:::
